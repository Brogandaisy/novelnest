{% extends "base.html" %}

{% block title %}Book List{% endblock %}

{% block content %}
    <h1>Your Book List</h1>

    <!-- Search Bar -->
    <form method="get" action="{% url 'book_search' %}">
        <input
            type="text"
            name="q"
            placeholder="Search books..."
            value="{{ request.GET.q|default:'' }}"
        />
        <button type="submit">Search</button>
    </form>

    <h2>Wish List ({{ wish_list_count }})</h2>
    {% if wish_list_books %}
        <ul>
            {% for book in wish_list_books %}
                <li>
                    <strong>{{ book.title }}</strong> by {{ book.author }} <br>
                    <a href="{% url 'book_detail' book.pk %}">View Details</a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No books in your wish list.</p>
    {% endif %}
    
    <h2>Currently Reading ({{ reading_count }})</h2>
    {% if reading_books %}
        <ul>
            {% for book in reading_books %}
                <li>
                    <strong>{{ book.title }}</strong> by {{ book.author }} <br>
                    <a href="{% url 'book_detail' book.pk %}">View Details</a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>You are not currently reading any books.</p>
    {% endif %}
    
    <h2>Completed ({{ completed_count }})</h2>
    {% if completed_books %}
        <ul>
            {% for book in completed_books %}
                <li>
                    <strong>{{ book.title }}</strong> by {{ book.author }} <br>
                    <a href="{% url 'book_detail' book.pk %}">View Details</a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No completed books yet.</p>
    {% endif %}
    
    <a href="{% url 'book_add' %}">Add a new book</a>
    {% endblock %}